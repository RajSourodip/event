<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css"> 
    <style>

      body {
          font-family: Arial, sans-serif;
          background-color: #f4f4f4;
          margin: 0;
          padding: 0;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
      }
      
      .container {
          text-align: center;
          background: #fff;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      
      .login-options button {
          padding: 10px 20px;
          margin: 10px;
          font-size: 16px;
          cursor: pointer;
      }
      
      .hidden {
          display: none;
      }
      
      #districts ul {
          list-style-type: none;
          padding: 0;
      }
      
      #districts li {
          padding: 10px;
          cursor: pointer;
          background: green;
          margin: 5px 0;
          border-radius: 5px;
      }
      
      #districts li:hover {
          background: green;
      }
      
      table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
      }
      
      th, td {
          padding: 10px;
          border: 1px solid #ccc;
      }
      
      th {
          background: #f4f4f4;
      }
      
        </style>
</head>
<body>

    <div class="container">
        <div class="login-options">
            <button id="employeeBtn">Login as Employee</button>
            <button id="adminBtn">Login as Admin</button>
        </div>
        <div id="districts" class="hidden">
            <h2>Select a District</h2>
            <ul>
                <li data-district="Nilgiris">Nilgiris</li>
                <li data-district="Kasaragod">Kasaragod</li>
                <li data-district="Kannur">Kannur</li>
                <li data-district="Calicut">Calicut</li>
                <li data-district="Wayanad">Wayanad</li>
                <li data-district="Malappuram">Malappuram</li>
                <li data-district="Palakkad">Palakkad</li>
                <li data-district="Trichur">Trichur</li>
                <li data-district="Ernakulam">Ernakulam</li>
                <li data-district="Kotayam">Kotayam</li>
                <li data-district="Idukki">Idukki</li>
                <li data-district="Alleppey">Alleppey</li>
                <li data-district="Kollam">Kollam</li>
                <li data-district="Pathanamthitta">Pathanamthitta</li>
                <li data-district="Thiruvananthapuram">Thiruvananthapuram</li>
            </ul>
        </div>
        <div id="reports" class="hidden">
            <h2>Reports for <span id="districtName"></span></h2>
            <table>
                <thead>
                    <tr>
                        <th>Dates</th>
                        <th>Total Schools Visited</th>
                        <th>Interested in De</th>
                        <th>PD(Principal Demo) Done</th>
                        <th>PD(Principal Demo) Fixed</th>
                        <th>TD(Teacher 's Demo) Done</th>
                        <th>TD(Teacher 's Demo) Fixed</th>
                        <th>SMD(Senior Management Demo) Done</th>
                        <th>SMD(Senior Management Demo) Fixed</th>
                        <th>Sign Up Follow Up</th>
                        <th>Signed</th>
                        <th>Total Schools for Sign Up</th>
                        <th>Strength</th>
                    </tr>
                </thead>
                <tbody id="reportBody">
                   
                </tbody>
            </table>
        </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
    const employeeBtn = document.getElementById('employeeBtn');
    const districtsDiv = document.getElementById('districts');
    const reportsDiv = document.getElementById('reports');
    const districtNameSpan = document.getElementById('districtName');
    const reportBody = document.getElementById('reportBody');

    employeeBtn.addEventListener('click', () => {
        districtsDiv.classList.remove('hidden');
        reportsDiv.classList.add('hidden');
    });

    districtsDiv.addEventListener('click', (event) => {
        if (event.target.tagName === 'LI') {
            const district = event.target.getAttribute('data-district');
            districtNameSpan.textContent = district;
            displayReports(district);
            reportsDiv.classList.remove('hidden');
        }
    });

    function displayReports(district) {
        const reports = getReportsForDistrict(district);
        reportBody.innerHTML = '';
        reports.forEach(report => {
            const row = document.createElement('tr');
            for (const key in report) {
                const cell = document.createElement('td');
                cell.textContent = report[key];
                row.appendChild(cell);
            }
            reportBody.appendChild(row);
        });
    }

    function getReportsForDistrict(district) {
        
        return [
            {
                date: '2024-11-01',
                totalSchoolsVisited: 10,
                interested: 5,
                pdDone: 3,
                pdFixed: 2,
                tdDone: 4,
                tdFixed: 1,
                smdDone: 2,
                smdFixed: 2,
                signUpFollowUp: 1,
                signed: 1,
                totalSchoolsForSignUp: 8,
                strength: 500
            },
            {
                date: '2024-11-08',
                totalSchoolsVisited: 8,
                interested: 4,
                pdDone: 2,
                pdFixed: 3,
                tdDone: 3,
                tdFixed: 2,
                smdDone: 1,
                smdFixed: 1,
                signUpFollowUp: 2,
                signed: 0,
                totalSchoolsForSignUp: 7,
                strength: 450
            }
          
        ];
    }
});
    </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/style.css" />
    <style>
      /* General Body Styling */
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: fixed;
        background-image: url(https://mir-s3-cdn-cf.behance.net/project_modules/disp/9bc27292880429.5e569ff84e4d0.gif);  
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        overflow-x: hidden;
        background-attachment: fixed;
        }
    
      /* Main Container Styling */
      .container {
        text-align: center;
        padding: 100px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        width: 600px;
        background: fixed;
        display: flex;
        margin: auto;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        overflow-x: hidden;
      }
    
      /* Buttons Section Styling */
      .login-options {
        display: flex;
        justify-content: space-evenly;
        margin-bottom: 20px;
      }
    
      button {
        padding: 10px 20px;
        font-size: 20px;
        cursor: pointer;
        background-color: goldenrod;
        color: white;
        border: none;
        border-radius: 5px;
        transition: background-color 0.3s;
      }
    
      button:hover {
        background-color: black;
      }
      #employeeBtn{
        color: white;
        font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        font-size: xx-large;
        background-color: rgb(223, 84, 223);
      }
      #employeeBtn:hover{
        background-color: black;
      }
      #enterBtn{
        color: white;
        font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        font-size: xx-large;
        background-color: rgb(223, 84, 223);
      }
      #enterBtn:hover{
        background-color: black;
      }

      /* Hidden Elements */
      .hidden {
        display: none;
      }
    
      /* Districts List Styling */
      #districts ul {
        list-style-type: none;
        padding: 0;
        position: relative;
      }
    
      #districts li {
        padding: 10px;
        cursor: pointer;
        background: black;
        margin: 5px 0;
        border-radius: 5px;
        color: white;
        transition: background-color 0.3s;
        text-align: center;
      }
    
      #districts li:hover {
        background: goldenrod;
      }
    
      /* Stylish and Responsive Table Styling */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden; /* Ensures rounded corners */
      }
    
      th,
      td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        font-size: 14px;
      }
    
      th {
        background: #f4f4f4;
        font-weight: bold;
      }
    
      tr:nth-child(even) {
        background-color: #f9f9f9;
      }
    
      tr:hover {
        background-color: #f1f1f1;
      }
    
      /* Responsive Design for Tables */
      @media (max-width: 768px) {
        /* Stacks the table rows on smaller screens */
        table {
          width: 100%;
          font-size: 12px;
        }
    
        th,
        td {
          padding: 10px;
        }
    
        td {
          display: block;
          text-align: right;
          padding-left: 50%;
        }
    
        td::before {
          content: attr(data-label);
          font-weight: bold;
          text-align: left;
          display: inline-block;
          width: 50%;
          padding-right: 10px;
        }
    
        /* Adds a cleaner border for mobile */
        tr {
          border-bottom: 2px solid #ddd;
        }
      }
    </style>    
  </head>
  <body>
    <div class="container">
      <div class="login-options">
        <button id="employeeBtn">Login As Employee</button>
        <button id="enterBtn" class="hidden">Enter</button>
      </div>
      <div id="districts" class="hidden">
        <h2>Select a District</h2>
        <ul id="districtList">
          <li data-district="Nilgiris">Nilgiris</li>
          <li data-district="Kasaragod">Kasaragod</li>
          <li data-district="Kannur">Kannur</li>
          <li data-district="Calicut">Calicut</li>
          <li data-district="Wayanad">Wayanad</li>
          <li data-district="Malappuram">Malappuram</li>
          <li data-district="Palakkad">Palakkad</li>
          <li data-district="Trichur">Trichur</li>
          <li data-district="Ernakulam">Ernakulam</li>
          <li data-district="Kotayam">Kotayam</li>
          <li data-district="Idukki">Idukki</li>
          <li data-district="Alleppey">Alleppey</li>
          <li data-district="Kollam">Kollam</li>
          <li data-district="Pathanamthitta">Pathanamthitta</li>
          <li data-district="Thiruvananthapuram">Thiruvananthapuram</li>
        </ul>
      </div>
    </div>
    <script>
       
      document.addEventListener("DOMContentLoaded", () => {
        const employeeBtn = document.getElementById("employeeBtn");
        const enterBtn = document.getElementById("enterBtn"); // Enter button
        const districtsDiv = document.getElementById("districts");

        // Show the 'Enter' button after employee login
        employeeBtn.addEventListener("click", () => {
          enterBtn.classList.remove("hidden");
        });

        const districtList = document.getElementById('districtList');
        const districtItems = districtList.querySelectorAll('li');
      
      districtItems.forEach(function (item) {
        item.addEventListener('click', function () {
          const selectedDistrict = item.getAttribute('data-district');
          window.location.href = `/report_form?district=${encodeURIComponent(selectedDistrict)}`;
        });
      });

        // Handle the 'Enter' button click event
        enterBtn.addEventListener("click", () => {
          // Check if the employee has permission to access
          checkAccess();
        });

        function checkAccess() {
          fetch("/check_permission", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username: "employee_username", // Replace with actual username
            }),
          })
          .then(response => response.json())
          .then(data => {
            if (data.hasAccess) {
              alert("Access granted. Proceeding to district selection.");
              districtsDiv.classList.remove("hidden"); // Show districts if access granted
            } else {
              alert("You do not have access. Sending access request.");
              sendAccessRequest();
            }
          })
          .catch(error => {
            console.error("Error checking access:", error);
          });
        }

        function sendAccessRequest() {
          fetch("/send_permission_request", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username: "employee_username", // Replace with actual username
            }),
          })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              alert("Access request sent. Please wait for approval.");
            } else {
              alert("Error sending access request.");
            }
          })
          .catch(error => {
            console.error("Error sending access request:", error);
          });
        }
      });
      document.getElementById("reportForm")
    .addEventListener("click", function () {
        window.location.href = "/report_form";
    });
    </script>
  </body>
</html>
